<div class="flex flex-column h-full">
    <h1 class="flex-none mb-4">Gold Planner</h1>

    <div #tableContainer class="flex-1 overflow-auto">
        <p-table
            [value]="raids"
            scrollable="true"
            scrollHeight="400px"
            showGridlines
            [tableStyle]="{ width: '100%'}"
            styleClass="p-datatable-sm flex-none">

            <!-- Header -->
            <ng-template pTemplate="header">
                <tr>
                    <th pFrozenColumn class="frozen">Raids</th>

                    <th
                        *ngFor="let char of characters"
                        class="flex-1 text-center text-nowrap overflow-hidden"
                        [style.width.px]="frozenWidth"
                        [style.min-width.px]="charWidth">

                        <div class="flex align-items-center justify-content-center gap-1">
                            <img [src]="char.characterClassIcon" width="24" height="24">
                            <span>{{ char.name }}</span>
                            <span class="text-sm text-gray-600">[{{ char.ilvl }}]</span>
                        </div>
                    </th>
                </tr>
            </ng-template>

            <!-- Body -->
            <ng-template pTemplate="body" let-raid>
                <tr>
                    <td pFrozenColumn class="frozen">
                        <div class="flex align-items-center gap-2">
                            <img [src]="getRaidIcon(raid.type)" width="20" />
                            {{ raid.name }}
                        </div>
                    </td>

                    <td
                        *ngFor="let char of characters"
                        class="flex-1 text-center text-nowrap"
                        [style.width.px]="frozenWidth"
                        [style.min-width.px]="charWidth">

                        <label class="table-switch">
                            <input
                                type="checkbox"
                                [checked]="getCharacterRaid(raid.id, char.id)?.tracked"
                                (change)="onToggle(raid, char)"
                            />
                            <span class="slider"></span>
                        </label>
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </div>
</div>